# Nodejs 中的多线程和多进程

主要是关于密集型任务的性能探究，如果不是密集型，也不需要做到这种地步。

node 服务运行有以下几种形态：

- 纯单进程模型，也就是无任何加工。对于 cpu 某个单核的利用率应该是接近 100%。
- 子进程模型，可以自己任意设定进程数量。由消息队列进行全双工通信（说明支持异步），但是父子进程通信，多子进程管理等需要自己实现。
- cluster 集群模式，加强了子进程模型，补齐了不足。还有一个点解决，没有实现内存共享（IPC 底层是支持内存共享的），需要借助第三方包来实现。还有就是粒度有点粗，打开监控系统可以看到很多 node 进程。
- 多线程模型，可以通过 SharedArrayBuffer 对管道通讯时提供内存共享的支持，且粒度细，速度比较快。——参考[进程间通信和线程间通信的几种方式](https://www.cnblogs.com/fanguangdexiaoyuer/p/10834737.html#_label6_0)
